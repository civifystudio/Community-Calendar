# Database Schema Reference

This document outlines the recommended schema for the tables used by this application in your Supabase project.

**Important:** The database schema is managed through the Supabase dashboard, not through files in this repository. This file serves as a reference.

---

## `events` Table

This table stores all the calendar events.

| Column Name     | Data Type     | Constraints       | Description                                                                 |
|-----------------|---------------|-------------------|-----------------------------------------------------------------------------|
| `id`            | `bigint`      | Primary Key, Identity | Unique identifier for each event.                                           |
| `created_at`    | `timestamptz` | `now()` default   | Timestamp of when the record was created.                                   |
| `date`          | `date`        | Not Null          | The date of the event, e.g., `2024-12-25`.                                    |
| `title`         | `text`        | Not Null          | The title of the event.                                                     |
| `details`       | `text`        | Not Null          | A longer description for the event.                                         |
| `start_hour`    | `float8`      | Not Null          | **Crucial:** The start time, as a decimal. E.g., 9.5 for 9:30 AM. Must be `float8` or `numeric`. |
| `end_hour`      | `float8`      | Not Null          | **Crucial:** The end time, as a decimal. E.g., 17.0 for 5:00 PM. Must be `float8` or `numeric`. |
| `external_link` | `text`        | Nullable          | An external link for the event (e.g., tickets, info page).                  |
| `link`          | `text`        | Nullable          | A unique, shareable link to the event's detail page (e.g., `/event/123`).   |

### Example SQL to Create `events` Table
```sql
-- This ensures the table and its columns have the correct data types.
-- The `start_hour` and `end_hour` columns use `double precision` (`float8`), which
-- is a floating-point number that correctly stores times with minute precision (e.g., 9.5 for 9:30).

CREATE TABLE public.events (
  id bigint NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  date date NOT NULL,
  title text NOT NULL,
  details text NOT NULL,
  start_hour double precision NOT NULL,
  end_hour double precision NOT NULL,
  external_link text,
  link text
);

ALTER TABLE public.events ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
  SEQUENCE NAME public.events_id_seq
  START WITH 1
  INCREMENT BY 1
  NO MINVALUE
  NO MAXVALUE
  CACHE 1
);

ALTER TABLE ONLY public.events
  ADD CONSTRAINT events_pkey PRIMARY KEY (id);
```

## `admin_emails` Table

This table stores the email addresses of users who have administrative privileges.

| Column Name | Data Type | Constraints | Description                                   |
|-------------|-----------|-------------|-----------------------------------------------|
| `email`     | `text`    | Primary Key | The email address of an administrator.        |


### Example SQL to Create `admin_emails` Table
```sql
CREATE TABLE public.admin_emails (
  email text NOT NULL
);

ALTER TABLE ONLY public.admin_emails
  ADD CONSTRAINT admin_emails_pkey PRIMARY KEY (email);
```
